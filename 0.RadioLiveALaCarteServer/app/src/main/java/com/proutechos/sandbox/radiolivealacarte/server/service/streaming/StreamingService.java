package com.proutechos.sandbox.radiolivealacarte.server.service.streaming;import java.io.File;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.Date;public class StreamingService {    public void recordWithSegments(String url) {        // Générer un nom de fichier basé sur la date et l'heure        String timestamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());        String outputFileName = "output_" + timestamp + "output_%04d.mp3";        String outputPath = "/Users/eglantine/Dev/0.perso/2.Proutechos/8.RadioStreaming/0.RadioLiveALaCarteServer/app/src/main/resources/static/media/mp3/" + outputFileName;        // Créez un processus pour exécuter FFmpeg        ProcessBuilder processBuilder = new ProcessBuilder(                "ffmpeg",                "-i", url,                "-c:a", "libmp3lame",                "-b:a", "192k",                "-f", "mp3",                "-f", "segment",                "-segment_time", "10",                outputPath        );        // Redirigez les flux d'erreur et de sortie        processBuilder.redirectErrorStream(true);        processBuilder.directory(new File("/Users/eglantine/Dev/0.perso/2.Proutechos/8.RadioStreaming/0.RadioLiveALaCarteServer/app/src/main/resources/static/media/mp3"));        try {            // Démarrez le processus            Process process = processBuilder.start();            System.out.println("Enregistrement en cours dans : " + outputFileName + "... Appuyez sur Entrée pour arrêter.");            // Attendez que l'utilisateur appuie sur Entrée pour arrêter l'enregistrement            System.in.read();            // Arrêtez le processus FFmpeg            process.destroy();            System.out.println("Enregistrement arrêté.");            // Vérifiez le code de sortie            int exitCode = process.waitFor();            System.out.println("FFmpeg s'est terminé avec le code de sortie : " + exitCode);        } catch (IOException | InterruptedException e) {            e.printStackTrace();        }    }    //    //    // IMPLEMENTATION    //    //    //    //    // SINGLETON    //    //    private static StreamingService _instance = new StreamingService();    public static StreamingService getInstance() {        return _instance;    }}