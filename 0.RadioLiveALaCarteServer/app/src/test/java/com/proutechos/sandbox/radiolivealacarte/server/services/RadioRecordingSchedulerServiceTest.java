package com.proutechos.sandbox.radiolivealacarte.server.services;import com.proutechos.sandbox.radiolivealacarte.server.service.recording.RadioRecordingSchedulerService;import org.junit.Test;import org.quartz.SchedulerException;import java.io.File;import java.io.IOException;import java.nio.file.Files;import java.nio.file.Path;import java.nio.file.Paths;import java.text.SimpleDateFormat;import java.util.Date;import java.util.Random;public class RadioRecordingSchedulerServiceTest {    @Test    public void testStreaming() {        // Spécifiez l'URL du flux audio        String url = "https://stream.radiofrance.fr/franceinfo/franceinfo_hifi.m3u8?id=radiofrance";        int numero = 0;        // Générer un nom de fichier basé sur la date et l'heure        String timestamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());        String outputFileName = "output_" + timestamp + "output_%04d.mp3";        String outputPath = "/Users/eglantine/Dev/0.perso/2.Proutechos/8.RadioStreaming/0.RadioLiveALaCarteServer/app/src/main/resources/static/media/mp3/" + outputFileName;        // Créez un processus pour exécuter FFmpeg        ProcessBuilder processBuilder = new ProcessBuilder(                "ffmpeg",                "-i", url,                "-c:a", "libmp3lame",                "-b:a", "192k",                "-f", "mp3",                "-f", "segment",                "-segment_time", "10",                outputPath        );        // Redirigez les flux d'erreur et de sortie        processBuilder.redirectErrorStream(true);        processBuilder.directory(new File("/Users/eglantine/Dev/0.perso/2.Proutechos/8.RadioStreaming/0.RadioLiveALaCarteServer/app/src/main/resources/static/media/mp3"));        try {            // Démarrez le processus            Process process = processBuilder.start();            System.out.println("Enregistrement en cours dans : " + outputFileName + "... Appuyez sur Entrée pour arrêter.");            // Attendez que l'utilisateur appuie sur Entrée pour arrêter l'enregistrement            System.in.read();            // Arrêtez le processus FFmpeg            process.destroy();            System.out.println("Enregistrement arrêté.");            // Vérifiez le code de sortie            int exitCode = process.waitFor();            System.out.println("FFmpeg s'est terminé avec le code de sortie : " + exitCode);        } catch (IOException | InterruptedException e) {            e.printStackTrace();        }    }    @Test    public void testSchedule() throws SchedulerException {        RadioRecordingSchedulerService.getInstance().programRecording(21, 39, 0, 21, 40, 0, 1, "https://stream.radiofrance.fr/franceinfo/franceinfo_hifi.m3u8?id=radiofrance");        // Attendez que l'utilisateur appuie sur Entrée pour arrêter l'enregistrement        try {            System.in.read();        } catch (IOException e) {            throw new RuntimeException(e);        }    }}